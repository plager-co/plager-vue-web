<template>
<div class="full" id='s2-chart-w'>
<svg ref='svgImg' version="1.1" id="chart-0" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px"
	 y="0px" viewBox="0 0 1179 617" style="enable-background:new 0 0 1179 617;" xml:space="preserve">
<filter  filterUnits="objectBoundingBox" height="102.4%" id="filter-2" width="101.3%" x="-0.6%" y="-1.2%">
	<feMorphology  in="SourceAlpha" operator="dilate" radius="1" result="shadowSpreadOuter1"></feMorphology>
	<feOffset  dx="0" dy="0" in="shadowSpreadOuter1" result="shadowOffsetOuter1"></feOffset>
	<feGaussianBlur  in="shadowOffsetOuter1" result="shadowBlurOuter1" stdDeviation="1.5"></feGaussianBlur>
	<feColorMatrix  in="shadowBlurOuter1" type="matrix" values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.03 0"></feColorMatrix>
</filter>
<title>Group 30</title>
<desc>Created with Sketch.</desc>
<g id="chart0">
	<g id="Home_white_main1" transform="translate(-363.000000, -1408.000000)">
		<g id="Group-30" transform="translate(368.000000, 1413.000000)">
			<g id="Base">
				<g class="main-st0">
					<path id="path-1_2_" d="M-1-5h1171c2.2,0,4,1.8,4,4v609c0,2.2-1.8,4-4,4H-1c-2.2,0-4-1.8-4-4V-1C-5-3.2-3.2-5-1-5z"/>
				</g>
				<g>
					<path id="path-1_1_" class="main-st1" d="M-1-5h1171c2.2,0,4,1.8,4,4v609c0,2.2-1.8,4-4,4H-1c-2.2,0-4-1.8-4-4V-1C-5-3.2-3.2-5-1-5z
						"/>
				</g>
			</g>
			<text transform="matrix(1 0 0 1 168.4649 571)" class="main-st2 main-st3 main-st4">10</text>
			<text transform="matrix(1 0 0 1 181.8125 571)" class="main-st2 main-st3 main-st4"> </text>
			<text transform="matrix(1 0 0 1 181.6191 571)" class="main-st2 main-st5 main-st4">분 후</text>
			<text transform="matrix(1 0 0 1 323.0121 571)" class="main-st2 main-st3 main-st4">1</text>
			<text transform="matrix(1 0 0 1 329.686 571)" class="main-st2 main-st3 main-st4"> </text>
			<text transform="matrix(1 0 0 1 328.6078 571)" class="main-st2 main-st5 main-st4">일</text>
			<text transform="matrix(1 0 0 1 489.8221 571)" class="main-st2 main-st3 main-st4">1</text>
			<text transform="matrix(1 0 0 1 496.496 571)" class="main-st2 main-st3 main-st4"> </text>
			<text transform="matrix(1 0 0 1 495.4178 571)" class="main-st2 main-st5 main-st4">주일</text>
			<text transform="matrix(1 0 0 1 711.0121 571)" class="main-st2 main-st3 main-st4">1</text>
			<text transform="matrix(1 0 0 1 717.686 571)" class="main-st2 main-st3 main-st4"> </text>
			<text transform="matrix(1 0 0 1 716.6078 571)" class="main-st2 main-st5 main-st4">달</text>
			<text transform="matrix(1 0 0 1 1055.8567 578)" class="main-st2 main-st5 main-st4">시간의</text>
			<text transform="matrix(1 0 0 1 1086.9963 578)" class="main-st2 main-st5 main-st4"> </text>
			<text transform="matrix(1 0 0 1 1090.3833 578)" class="main-st2 main-st5 main-st4">경과</text>
			<text transform="matrix(1 0 0 1 1092.48 65)" class="main-st5 main-st4"main->기억유지</text>
			<text transform="matrix(1 0 0 1 43.1934 474)" class="main-st2 main-st3 main-st4">20</text>
			<text transform="matrix(1 0 0 1 42.7188 385)" class="main-st2 main-st3 main-st4">40</text>
			<text transform="matrix(1 0 0 1 42.7949 294)" class="main-st2 main-st3 main-st4">60</text>
			<text transform="matrix(1 0 0 1 42.7773 202)" class="main-st2 main-st3 main-st4">80</text>
			<text transform="matrix(1 0 0 1 37.2871 109)" class="main-st2 main-st3 main-st4">100</text>
			<rect id="Line-segment" x="32" y="452" class="main-st6" width="1106" height="1.5"/>
			<rect id="Line-segment_1_" x="32" y="359" class="main-st6" width="1106" height="1.5"/>
			<rect id="Line-segment_2_" x="32" y="266" class="main-st6" width="1106" height="1.5"/>
			<rect id="Line-segment_3_" x="32" y="172" class="main-st6" width="1106" height="1.5"/>
			<rect id="Line-segment-Copy" x="32" y="79" class="main-st6" width="1106" height="1.5"/>
			<rect id="Line-segment_4_" x="32" y="545" class="main-st6" width="1106" height="1.5"/>
			<g id="Header" transform="translate(37.000000, 36.000000)">
				<text transform="matrix(1 0 0 1 -5 12)" class="main-st7 main-st3 main-st8">Forgetting curve</text>
			</g>
			<g ref='lines' class="graph">
				<path id="Path-2" class="line2" d="M95,546.5C109,239.5,143.2,86,197.5,86c81.5,0,24,208,104.5,294s147.5,88,440,88
					c195,0,325.3,0,391,0"/>
				<path id="Path-3" class="line2" d="M251,212c23.3-85.3,53-128,89-128c54,0,46,143.5,69.5,227c49.5,116.5,138,110.5,208,110.5
					c46.7,0,218.7,0,516,0"/>
				<path id="Path-4" class="line2" d="M384,158.1c54-43.2,103-66.6,147-70c66-5.1,23,124.4,85,192.5c68.5,63.4,134,92.5,301.5,92.5
					c111.7,0,183.7,0,216,0"/>
				<path id="Path-5" class="line2" d="M570,124.8c150.1-43,231.6-52.8,244.5-29.4c19.4,35-3.5,162,85,194c59,21.3,137,31.6,234,30.9"
					/>
				<path id="Path-7" class="line1" d="M95,545c16.3-61,42.5-131,78.5-210c54-118.5,81-146,206-175s404-78,755-78"/>
			</g>
		</g>
	</g>
</g>
</svg>
</div>
</template>


<script>
import anime from 'animejs'
var  scrollMonitor  = require ( "scrollmonitor" ); //  require를 사용하지 않으면 scrollMonitor 전역을 사용할 수 있습니다.

export default {
  data: function(){
    return {
      chartHeight: 0,
			scrollWatcher: '',
    }
  },
  methods: {
    lineAnimate: function() {
			const self = this

			const ani = anime({
				targets: '#s2-chart-w .graph path',
				strokeDashoffset: [anime.setDashoffset, 0],
				autoplay: false,
				easing: 'linear',
				duration: 1000,
				delay: function(el, i) {
					if(i < 4){
						return i * 100
					} else return 800
				},
				direction: 'normal',
				loop: false,
				run: function(a){
					self.isRunning = true
				},
				complete: function(){
					self.isRunning = false
				}
			})

			this.scrollWatcher.fullyEnterViewport(() => {
				ani.play()
			})

			this.scrollWatcher.exitViewport(() => {
				ani.pause()
				ani.seek(0)
			})
		}
  },
  created: function() {
    this.$nextTick(() => {
			this.scrollWatcher = scrollMonitor.create(this.$refs.lines)
			this.lineAnimate()
    });
  },
	computed: {
		isViewport() {
			return this.scrollWatcher.isFullyInViewport
		},
	}
};
</script>

<style scoped>

	.full { width: 100%; height: 100%; }

	.main-st0{filter:url(#filter-2);}
	.main-st1{fill:#FFFFFF;}
	.main-st2{fill:#AEAEAE;}
	.main-st3{font-family:'ArialMT';}
	.main-st4{font-size:12px;}
	.main-st5{font-family:'AppleSDGothicNeo-Bold-KSCpc-EUC-H';}
	.main-st6{fill:#F0F0F0;}
	.main-st7{fill:#4C6072;}
	.main-st8{font-size:18px;}
	.line2{fill:none;stroke:#00526C;stroke-width:2;stroke-linecap:round;stroke-dashoffset:100;}
	.line1{fill:none;stroke:#8DDC59;stroke-width:4;stroke-linecap:round;stroke-dashoffset:100;}

  @media screen and (min-width:0\0) and (min-resolution: +72dpi) {
    /* IE9+ CSS */
    svg * { font-size: 1rem !important;}
    svg .main-st4 { font-size: .7rem !important;}
  }

	@media screen and (max-width: 640px) {
		.full {display: none}
	}
</style>
